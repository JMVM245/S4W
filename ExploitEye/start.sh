#!/bin/bash

# Colores para mensajes
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m'

# Verificar si el entorno virtual existe
if [ ! -d "venv" ]; then
    echo -e "${YELLOW}El entorno virtual no existe. Ejecutando instalación...${NC}"
    sudo ./install.sh
fi

# Activar entorno virtual
echo -e "${GREEN}Activando entorno virtual...${NC}"
source venv/bin/activate

# Verificar si la base de datos existe
if [ ! -f "exploiteye.db" ]; then
    echo -e "${YELLOW}Inicializando base de datos...${NC}"
    python3 -c "from src.models.base import init_db; init_db()"
fi

# Iniciar la aplicación
echo -e "${GREEN}Iniciando ExploitEye...${NC}"
python3 src/main.py 